#!/bin/bash
# Author : Victor Mataigne (ABiMS, Station Biologique de Roscoff)
# A small script which rename a file correctly, according to its number of sequences

name=$(echo $1 | cut -d _ -f 1)
under=$(echo _sp)
number=$(grep '/' $file | wc -l)    
phy=$(echo .phy)
new_file=$name$under$number$phy
mv $file $new_file

name=$(echo $2 | cut -d _ -f 1)
under=$(echo _sp)   
number=$(head -4 $file | tail -1 | cut -d " "  -f 2 | cut -d = -f 2)    
nxs=$(echo .nxs)
new_file=$name$under$number$nxs   
mv $file $new_file

if [ ! -z "$3" ]
then
    name=$(echo $3 | cut -d _ -f 1)
    under=$(echo _sp)   
    number=$(grep '>' $file | wc -l)
    fasta=$(echo .fasta)
    new_file=$name$under$number$fasta    
    mv $file $new_file
fi
